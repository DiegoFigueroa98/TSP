<!doctype html>
<html lang="es">
<head>
<title>WillyLoman and the Travelling Salesman Problem</title>
<style>
body{
    background-color:#EEE;
}
#thecanvas {
    background-color:#FFF;  
}
#divAlgo {
    width:800px;
    clear:both;
}
#spnPoint {
    float:right;
}
</style>
</head>
<body>
<p>
Problema del agente viajero
</p>
<p>
<!--
<input type="text" id="txtAddCount" value="35"> random points.
<button type="button" id="btnAddRandom">Add</button>
</p>
-->
<canvas id="thecanvas" width="800" height="500" style="background-image: url('mapa.jpg'); background-size: 100% 100%;">
Your browser does not support the canvas element. Sorry.
</canvas>
<div id="divAlgo">
    <select id="ddlAlgo"></select>
    <button type="button" id="btnGo">Solve</button>
    <button type="button" id="btnStop">Stop</button>
    <button type="button" id="btnClear">Clear</button>
    <span id="spnPoint">
        Ciudades
        <span id="spnPointCount">0</span>
    </span>
</div>
<p>
Distancia: <span id="spnDistance"></span><br>
Iteraciones: <span id="spnIteration"></span><br>
<!-- Improvements: <span id="spnImprovement"></span> -->
</p>
<script type="text/javascript" src="src/WillyLoman.js"></script>
<script type="text/javascript" src="src/corbos.tsp.inorder.js"></script>
<script type="text/javascript" src="src/corbos.tsp.onerandom.js"></script>
<script type="text/javascript" src="src/corbos.tsp.iteraterandom.js"></script>
<script type="text/javascript" src="src/corbos.tsp.bestnearestneighbor.js"></script>
<script type="text/javascript" src="src/corbos.tsp.bruteforce.js"></script>
<script type="text/javascript" src="src/corbos.tsp.branchnbound.js"></script>
<script type="text/javascript" src="src/corbos.tsp.dynamic.js"></script>
<script type="text/javascript" src="src/corbos.tsp.ga.js"></script>
<script type="text/javascript" src="src/corbos.tsp.gamutation.js"></script>
<script type="text/javascript" src="src/corbos.tsp.gacrossover.js"></script>
<script type="text/javascript" src="src/corbos.tsp.twooptfirst.js"></script>
<script type="text/javascript" src="src/corbos.tsp.twooptbest.js"></script>
<script type="text/javascript" src="src/WillyLoman.UI.js"></script>
<script type="text/javascript">
(function() {
    var byId = function(id) { return document.getElementById(id); };

    var thecanvas = byId('thecanvas'),
        spnDistance = byId('spnDistance'),
        spnIteration = byId('spnIteration'),
        spnImprovement = byId('spnImprovement'),
        spnPointCount = byId('spnPointCount'),
        ddlAlgo = byId('ddlAlgo');

    var notify = function(data) {
        spnDistance.innerHTML = data.distance;
        spnIteration.innerHTML = data.iteration;
        //spnImprovement.innerHTML = data.improvements;
    };

    var ui = new WillyLoman.UI(thecanvas, notify);
    for(var key in WillyLoman.algorithms) {
        ddlAlgo.appendChild(new Option(WillyLoman.algorithms[key].name, key));
    }
    /**
    byId('btnAddRandom').addEventListener('click', function() {
        ui.addRandom(byId('txtAddCount').value);
        spnPointCount.innerHTML = ui.solver.points.length;
    });
    **/
    byId('btnClear').addEventListener('click', function() {
        ui.clear();
    });
    byId('btnGo').addEventListener('click', function() {
        ui.solve(ddlAlgo.value);
    });
    byId('btnStop').addEventListener('click', function() {
        ui.stop();
    });
    thecanvas.addEventListener('mousedown', function() {
        setTimeout(function () { spnPointCount.innerHTML = ui.solver.points.length; }, 0);
    });
})();
</script>
</body>
</html>
